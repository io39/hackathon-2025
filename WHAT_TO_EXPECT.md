# ğŸ“± What to Expect: Instagram Share Flow

## Visual Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Instagram Post      â”‚
â”‚   (Reel/Video/Post)     â”‚
â”‚                         â”‚
â”‚   [Share Button ğŸ“¤]     â”‚ â† User taps here
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   iOS Share Sheet       â”‚
â”‚                         â”‚
â”‚  [Messages]  [Mail]     â”‚
â”‚  [WhatsApp]  [Twitter]  â”‚
â”‚  [Video Analyzer] â˜…     â”‚ â† Your app appears here!
â”‚     [More...]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Video Analyzer         â”‚ â† Your custom UI
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                         â”‚
â”‚  Analyze Video          â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ›¡ï¸ Hoax Check     â”‚  â”‚
â”‚  â”‚ Verify authenticityâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ’¡ Explain This   â”‚  â”‚
â”‚  â”‚ Get explanation   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸŒŸ Expand Idea    â”‚  â”‚
â”‚  â”‚ Explore concepts  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚
â”‚      [Done]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ User taps an action
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Analyzing...           â”‚
â”‚       â³                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Analysis Complete    â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   â”‚  â”‚
â”‚  â”‚  Analysis results â”‚  â”‚
â”‚  â”‚  displayed here   â”‚  â”‚
â”‚  â”‚  in scrollable    â”‚  â”‚
â”‚  â”‚  text view...     â”‚  â”‚
â”‚  â”‚                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚
â”‚      [Done]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Step-by-Step Expectations

### 1. Before Sharing (Setup)
âœ… App installed on iPhone  
âœ… Backend running on Mac  
âœ… iPhone and Mac on same Wi-Fi

### 2. In Instagram
- You're looking at a post/reel
- You tap the **Share** button (looks like: ğŸ“¤ or âœˆï¸)
- iOS shows the share sheet with various apps

### 3. Share Sheet Appears
**What you should see:**
- Grid of app icons
- Your app icon might show as a generic square
- Text below says "Video Analyzer"
- If not visible immediately, scroll left/right or tap "More"

**Note:** First time using an app from share sheet, it might be in "More" section. After first use, iOS will promote it to the main row.

### 4. Tap "Video Analyzer"
**What happens:**
- Bottom sheet slides up from bottom
- Dark blue/purple gradient background (#0A0E27)
- "Analyze Video" title at top
- Three colorful action buttons appear

**UI Colors:**
- Background: Deep blue (#0A0E27)
- Buttons: Dark purple (#1A1E3E)
- Hoax Check border: Red (#FF6B6B)
- Explain This border: Yellow (#FFD93D)
- Expand Idea border: Cyan (#4ECDC4)
- Primary accent: Purple (#6C63FF)

### 5. Choose an Action
**What happens immediately:**
- Buttons disappear
- Title changes to "Analyzing..."
- Spinner appears in center
- Backend processes request (5-30 seconds typically)

**In Console Logs:**
```
[SHARE EXTENSION] Processing 1 attachments
[SHARE EXTENSION] âœ“ Received URL: https://www.instagram.com/p/...
[SHARE EXTENSION] Sending to backend: http://10.10.131.31:8000/api/video
[SHARE EXTENSION] âœ“ Video received by backend
[SHARE EXTENSION] Analyzing with action: hoax_check
[SHARE EXTENSION] Waiting for backend response...
[SHARE EXTENSION] âœ“ Analysis complete (1523 chars)
```

### 6. Results Appear
**What you should see:**
- Title changes to "âœ“ Analysis Complete"
- Text view appears with results
- Results are scrollable if long
- "Done" button remains at bottom
- Results shown in white text on dark background

### 7. Tap "Done"
**What happens:**
- Extension closes
- Returns to Instagram
- Instagram remains on the same post you were viewing

## Common Scenarios

### âœ… Perfect Success
```
Instagram â†’ Share â†’ Video Analyzer â†’ Choose Action â†’ See Results â†’ Done â†’ Back to Instagram
```
**Time:** ~10-30 seconds total

### âš ï¸ Backend Not Running
```
Instagram â†’ Share â†’ Video Analyzer â†’ Choose Action â†’ Error: "Failed to connect to backend"
```
**Solution:** Start backend with `cd backend && ./start.sh`

### âš ï¸ Wrong Network
```
Extension appears frozen or times out
```
**Solution:** Ensure iPhone and Mac on same Wi-Fi, check Mac IP is correct

### âš ï¸ App Doesn't Appear
```
Instagram â†’ Share â†’ No "Video Analyzer" visible
```
**Solutions:**
1. Scroll through all apps in share sheet
2. Check "More" section
3. Reinstall app
4. Restart iPhone

## Behind the Scenes (Technical)

When you share from Instagram:

1. **Instagram** provides the extension with:
   - URL of the post
   - Possibly image/video data
   - Post metadata

2. **Your Extension**:
   - Runs in a separate process from main app
   - Has ~30MB memory limit
   - Must finish in <30 seconds or iOS kills it
   - Extracts URL from Instagram's shared data

3. **Backend Processing**:
   - Receives URL via HTTP POST
   - Downloads video from URL
   - Processes with AI/ML
   - Returns analysis

4. **Display Results**:
   - Extension shows formatted text
   - User can scroll through results
   - Tapping "Done" completes the extension

## Supported Content Types

Your extension activates for:
- âœ… Instagram Posts (with videos)
- âœ… Instagram Reels
- âœ… Instagram Stories (with video)
- âœ… IGTV videos
- âœ… Any Instagram content with a URL

Also works with:
- âœ… TikTok videos
- âœ… YouTube videos
- âœ… Twitter videos
- âœ… Any video URL from Safari

## What Users Will Experience

1. **Fast** - Extension loads in <1 second
2. **Beautiful** - Modern, gradient UI with smooth animations
3. **Simple** - Three clear action buttons
4. **Informative** - Rich text results
5. **Seamless** - Returns to Instagram when done

## Testing Checklist

- [ ] App installs without errors
- [ ] Extension appears in Instagram share sheet
- [ ] Extension UI displays correctly (dark theme, buttons visible)
- [ ] URL is extracted (check logs)
- [ ] Backend receives request (check backend logs)
- [ ] Loading state shows (spinner visible)
- [ ] Results display (text readable)
- [ ] Done button works (returns to Instagram)
- [ ] Can share multiple posts in a row

## Performance Expectations

- **Extension Load Time:** <1 second
- **URL Extraction:** Instant
- **Backend Request:** 5-30 seconds (depends on video length)
- **Results Display:** Instant once received
- **Memory Usage:** <20MB typically
- **Network Usage:** Minimal (just sends URL, receives text)

## What If It's Not Working?

Check in this order:

1. **Is the app installed?**
   - Look for "Video Analyzer" icon on home screen

2. **Is the extension configured?**
   - Run: `open flutter_app/ios/Runner.xcworkspace`
   - Check both targets have valid signing

3. **Is the backend running?**
   - Visit: `http://YOUR_MAC_IP:8000` in browser
   - Should see API documentation or response

4. **Are devices on same network?**
   - iPhone Settings â†’ Wi-Fi (check network name)
   - Mac System Preferences â†’ Network (check network name)
   - Must match exactly

5. **Is the IP address correct?**
   - In ShareViewController.swift line 10
   - Run: `ipconfig getifaddr en0` to verify

6. **Are logs showing anything?**
   - Run: `flutter logs` while testing
   - Look for "[SHARE EXTENSION]" messages

---

**Everything working?** Your users can now analyze Instagram content directly from the share sheet! ğŸ‰

